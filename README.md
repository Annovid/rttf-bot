# rttf-bot

## Установка зависимостей

```shell
python 3.12 -m venv venv
source venv/bin/activate
pip install poetry==1.8.4
poetry install
```

### Миграции

```shell
cd src
export POSTGRES_CONNECTION_STRING=postgresql://pguser:pgpass@localhost/rttf_bot
alembic upgrade head
```

## Приоритизация задач
### TODO:
###### Важное и срочное (Делай сейчас):
- [ ] Скачивать информацию о турнирах каждые `n` минут (или делать pre-load)
- [ ] Добавить крутое логирование (доопределить)
- [ ] Добавить обработки ошибок через Sentry
- [ ] Не падать без ответа пользователю при возникновении сетевых ошибок
###### Важное, но не срочное (Планируй):
- [ ] Правильно отрабатывать ошибки
- [ ] Добавить информативные логи
- [ ] Исправить варнинги при сборке ([warnings.log](docs%2Fwarnings.log))
###### Не важное, но срочное (Делегируй или делай позже):
###### Не важное и не срочное (Откладывай или откажись):
- [ ] Правильно реагировать на сообщения в любой момент
- [ ] Добавить конфиг с промежутком, за который смотреть турниры
- [ ] Добавить шутки в конфиг
---
### Расширение возможностей бота
- [ ] Подсчёт рейтинга при возможных результатах матча
- [ ] Определение победителя в шахпонге
- [ ] Нахождение предыдущих соперников в турнире
### Сделано:
- [x] Добавить возможность грузить конфиг из базы данных
- [x] Добавить feedback
- [x] Перевести на виртуалку
- [x] Добавить базу данных
- [x] Добавить список команд через BotFather
- [x] Провести рефакторинг, чтобы избавиться от огромного файла
- [x] Отображать пользователей и турниры через ФИО и названия соответственно.
- [x] Лучше информировать пользователей о возможностях бота

## Деплой

```shell
docker-compose up -d --build rttf_bot_app
```